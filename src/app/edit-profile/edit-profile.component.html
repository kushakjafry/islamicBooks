<div class="container-fluid" id="header">
    <div class="row">
        <div class="col col-12 col-md-6">
            <h2>Edit Profile</h2>
        </div>
        <div class="col col-12 col-md-6" style="text-align: right;" *ngIf="User">
            <button class="btn btn-warning" [routerLink]="[ '/profile', User.username ]">
                Back to profile
            </button>
        </div>
    </div>
</div>

<div *ngIf="errMess || successMess">
    <div class="alert alert-{{alerts.type}}">
      <button type="button" class="close" (click)="alertDismiss()">&times;</button>
      {{alerts.msg}}
      </div>
    </div>

<div class="container" style="margin-top: 20px;">
    <form novalidate [formGroup] = "profileForm" #pform=ngForm (ngSubmit)=onSubmit() *ngIf="User && showForm">
        <div class="row">
            <div class="col col-12 col-md-6">
                <mat-form-field style="width: inherit;" appearance="outline">
                    <mat-label>Full Name</mat-label>
                    <input matInput formControlName="fullname" placeholder="Full Name" type="text" required>
                    <span matSuffix><fa-icon [icon]="faUserCircle"></fa-icon></span>
                    <mat-error *ngIf="formErrors.fullname">{{formErrors.fullname}}</mat-error>
                </mat-form-field> 
            </div>
            <div class="col col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: inherit;">
                    <mat-label>Profession</mat-label>
                    <input matInput formControlName="profession" placeholder="What is your current status" type="text">
                    <span matSuffix><fa-icon [icon]="faUserCircle"></fa-icon></span>
                </mat-form-field> 
            </div>
        </div>
        <div class="row">
            <div class="col col-12 col-md-6">
                <mat-select placeholder="Gender" formControlName="gender">
                    <mat-option *ngFor="let gender of genderType" [value]="gender.type">
                      {{ gender.name }}
                    </mat-option>
                  </mat-select>
            </div>
            <div class="col col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: inherit;">
                        <mat-label>Bio</mat-label>
                        <textarea matInput formControlName="bio" placeholder="Tell us more about yourself. What books have you studied? What books have you read?" rows=6></textarea>
                </mat-form-field> 
            </div>
        </div>
        <div class="row">
            <div class="col col-12" style="text-align: center;">
                <button class="btn btn-warning" type="button" [hidden]="changePassword" (click)="passwordchange()">
                    Change Password
                </button>
            </div>
            <div class="col col-12 col-md-6" *ngIf="changePassword">
                <mat-form-field appearance="outline" style="width: inherit;">
                    <mat-label>Old Password</mat-label>
                    <input matInput formControlName="oldpassword" placeholder="Enter your exsisting password" type="password" required>
                    <span matSuffix><fa-icon [icon]="faLock"></fa-icon></span>
                </mat-form-field> 
            </div>
            <div class="col col-12 col-md-6" *ngIf="changePassword">
                <mat-form-field appearance="outline" style="width: inherit;">
                    <mat-label>New Password</mat-label>
                    <input matInput formControlName="newpassword" placeholder="Enter  your new password" type="password" required>
                    <span matSuffix><fa-icon [icon]="faKey"></fa-icon></span>
                </mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col col-12" style="text-align: center;margin-top: 20px;">
                <button type="submit" class="btn btn-primary" style="box-shadow: 0 10px 14px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);" [disabled]="profileForm.invalid">Update</button>
            </div>
        </div>
    </form>
</div>
<div class="container" [hidden]="User">
    <div class="row">
        <div class="col col-12" style="text-align: center;vertical-align: middle; padding-top: 25vh; padding-bottom: 25vh;">
            <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
        </div>
    </div>
</div>
<div class="container" *ngIf="!showForm">
    <div class="row">
        <div class="col col-12" style="text-align: center;vertical-align: middle; padding-top: 25vh; padding-bottom: 25vh;">
            <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
        </div>
    </div>
</div>